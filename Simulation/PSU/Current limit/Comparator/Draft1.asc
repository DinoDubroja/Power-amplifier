Version 4
SHEET 1 1900 680
WIRE -448 -48 -576 -48
WIRE -48 -48 -368 -48
WIRE 384 -48 -48 -48
WIRE 832 -48 384 -48
WIRE 1216 -48 928 -48
WIRE 1392 -48 1216 -48
WIRE -48 -16 -48 -48
WIRE 384 0 384 -48
WIRE -1072 16 -1072 -32
WIRE -48 96 -48 64
WIRE -48 96 -176 96
WIRE 160 96 -48 96
WIRE -576 112 -576 -48
WIRE -1072 128 -1072 96
WIRE -1072 128 -1168 128
WIRE -48 128 -48 96
WIRE 240 128 240 80
WIRE 1216 128 1216 -48
WIRE -176 144 -176 96
WIRE 160 144 160 96
WIRE 208 144 160 144
WIRE 384 160 384 80
WIRE 384 160 272 160
WIRE 480 160 384 160
WIRE 656 160 608 160
WIRE 848 160 848 0
WIRE 848 160 736 160
WIRE -1072 176 -1072 128
WIRE 208 176 160 176
WIRE 240 208 240 192
WIRE 608 208 608 160
WIRE 608 208 592 208
WIRE -176 224 -176 208
WIRE -48 224 -48 208
WIRE -48 224 -176 224
WIRE 1216 224 1216 208
WIRE -48 256 -48 224
WIRE -1072 304 -1072 256
WIRE -576 304 -576 192
WIRE -336 304 -576 304
WIRE 160 304 160 176
WIRE 160 304 -336 304
WIRE -576 416 -576 304
WIRE -336 416 -336 304
WIRE -576 544 -576 496
WIRE -336 544 -336 480
FLAG -576 -48 -V
FLAG -576 544 0
FLAG -1168 128 0
FLAG -1072 -32 +V
FLAG -1072 304 -V
FLAG -48 256 0
FLAG 1392 240 0
FLAG 1216 224 0
FLAG 240 208 0
FLAG 240 80 -V
FLAG -336 544 0
SYMBOL res -592 96 R0
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res -592 400 R0
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL res -352 -64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 0.1
SYMBOL res 400 96 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL voltage -1072 0 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 44 Left 2
SYMATTR SpiceLine Rser=0
SYMATTR InstName V1
SYMATTR Value 18
SYMBOL voltage -1072 160 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=0
SYMATTR InstName V2
SYMATTR Value 18
SYMBOL res -64 -32 R0
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res -64 112 R0
SYMATTR InstName R6
SYMATTR Value {R}
SYMBOL cap -192 144 R0
SYMATTR InstName C1
SYMATTR Value 100n
SYMBOL OpAmps\\opamp2 240 224 M180
SYMATTR InstName U1
SYMATTR Value OPA1692
SYMBOL current 1392 160 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value PULSE(0.001m 10A 10m 100m 100m 1m)
SYMBOL Digital\\srflop 528 112 R0
WINDOW 39 -49 162 Left 2
SYMATTR SpiceLine Vhigh=0 Vlow=-17.5
SYMATTR InstName A1
SYMBOL res 752 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 100
SYMBOL res 1200 112 R0
SYMATTR InstName R8
SYMATTR Value 1
SYMBOL cap -352 416 R0
SYMATTR InstName C2
SYMATTR Value 100n
SYMBOL nmos 928 0 M270
SYMATTR InstName M1
SYMATTR Value Si7336ADP
TEXT -1144 432 Left 2 !.INCLUDE OPA1692.LIB
TEXT -1024 -424 Left 2 !.param Rpot=(k/100)*Rpot0
TEXT -1024 -376 Left 2 !.param R=10330 + Rpot Rpot0=380
TEXT -1008 -472 Left 2 !.tran 10m
TEXT -1016 -328 Left 2 !.param k=30
