Version 4
SHEET 1 2536 680
WIRE 64 48 -64 48
WIRE 464 48 144 48
WIRE 896 48 464 48
WIRE 1344 48 896 48
WIRE 1728 48 1440 48
WIRE 1904 48 1728 48
WIRE 464 80 464 48
WIRE 896 96 896 48
WIRE -560 112 -560 64
WIRE 464 192 464 160
WIRE 464 192 336 192
WIRE 672 192 464 192
WIRE -64 208 -64 48
WIRE -560 224 -560 192
WIRE -560 224 -656 224
WIRE 464 224 464 192
WIRE 1728 224 1728 48
WIRE 336 240 336 192
WIRE 672 240 672 192
WIRE 720 240 672 240
WIRE 896 256 896 176
WIRE 896 256 784 256
WIRE 992 256 896 256
WIRE 1168 256 1088 256
WIRE 1360 256 1360 96
WIRE 1360 256 1248 256
WIRE -560 272 -560 224
WIRE 720 272 672 272
WIRE 336 320 336 304
WIRE 464 320 464 304
WIRE 464 320 336 320
WIRE 752 320 752 288
WIRE 1728 320 1728 304
WIRE 464 352 464 320
WIRE -560 400 -560 352
WIRE -64 400 -64 288
WIRE 672 400 672 272
WIRE 672 400 -64 400
WIRE -64 512 -64 400
WIRE -64 640 -64 592
FLAG -64 48 +V
FLAG -64 640 0
FLAG 752 224 +V
FLAG -656 224 0
FLAG -560 64 +V
FLAG -560 400 -V
FLAG 464 352 0
FLAG 752 320 0
FLAG 1904 336 0
FLAG 1728 320 0
SYMBOL res -80 192 R0
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res -80 496 R0
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL res 160 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 0.1
SYMBOL res 912 192 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL voltage -560 96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 44 Left 2
SYMATTR SpiceLine Rser=0
SYMATTR InstName V1
SYMATTR Value 18
SYMBOL voltage -560 256 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=0
SYMATTR InstName V2
SYMATTR Value 18
SYMBOL res 448 64 R0
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res 448 208 R0
SYMATTR InstName R6
SYMATTR Value {R}
SYMBOL cap 320 240 R0
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL OpAmps\\opamp2 752 192 R0
SYMATTR InstName U1
SYMATTR Value OPA1692
SYMBOL pmos 1440 96 M270
SYMATTR InstName M1
SYMATTR Value HAT1072H
SYMBOL current 1904 256 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I2
SYMATTR Value PULSE(0.001m 10A 10m 100m 100m 1m)
SYMBOL Digital\\srflop 1040 208 R0
WINDOW 39 -49 162 Left 2
SYMATTR SpiceLine Vhigh=17.8
SYMATTR InstName A1
SYMBOL res 1264 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 100
SYMBOL res 1712 208 R0
SYMATTR InstName R8
SYMATTR Value 1
TEXT -632 528 Left 2 !.INCLUDE OPA1692.LIB
TEXT -512 -328 Left 2 !.param Rpot=(k/100)*Rpot0
TEXT -512 -280 Left 2 !.param R=10330 + Rpot Rpot0=380
TEXT -496 -376 Left 2 !.tran 10m
TEXT -504 -232 Left 2 !.param k=30
